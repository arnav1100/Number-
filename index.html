<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Number Clash â€” Demo</title>
  <style>
    body{font-family:Arial,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:20px;background:#0f1724;color:#e6eef8}
    .card{background:#081127;padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,.6);width:100%;max-width:420px}
    h1{margin:0 0 8px;font-size:20px}
    .row{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
    button.num{flex:1 0 22%;padding:14px;border-radius:8px;border:none;font-weight:700;font-size:18px;background:#0b63ff;color:white}
    .playBtn{width:100%;padding:12px;border-radius:8px;border:none;margin-top:12px;background:#1f8b3f;color:white;font-weight:700}
    .info{margin-top:12px;background:#071428;padding:10px;border-radius:8px;color:#a8c0d8}
    .result{margin-top:12px;padding:12px;border-radius:8px;font-weight:700;text-align:center}
  </style>
</head>
<body>
  <div class="card">
    <h1>Number Clash â€” Demo</h1>
    <div id="userInfo" style="font-size:13px;color:#9fc0ff">Loading...</div>

    <p style="margin-top:12px">Pick your number (0â€“9):</p>
    <div class="row" id="numbers">
      <!-- buttons populated by JS -->
    </div>

    <button class="playBtn" id="playBtn" disabled>Pick a number first</button>

    <div class="info" id="info">Tip: This is a demo single-player system vs Target number.</div>
    <div id="out" class="result"></div>
  </div>

<script>
  // Telegram WebApp ready (works inside Telegram)
  if (window.Telegram && window.Telegram.WebApp) {
    window.Telegram.WebApp.ready();
    const t = window.Telegram.WebApp;
    const init = t.initDataUnsafe || {};
    const user = init.user || null;
    document.getElementById('userInfo').innerText = user ? `Player: @${user.username || user.first_name}` : 'Player: Guest';
  } else {
    document.getElementById('userInfo').innerText = 'Player: (not in Telegram) â€” open via Telegram bot';
  }

  let chosen = null;
  const numbersDiv = document.getElementById('numbers');
  for (let i=0;i<10;i++){
    const b = document.createElement('button');
    b.innerText = i;
    b.className = 'num';
    b.onclick = ()=> {
      chosen = i;
      document.querySelectorAll('button.num').forEach(x=>x.style.opacity=0.5);
      b.style.opacity = 1;
      document.getElementById('playBtn').disabled = false;
      document.getElementById('out').innerText = '';
    };
    numbersDiv.appendChild(b);
  }

  document.getElementById('playBtn').onclick = ()=>{
    if (chosen === null) return;
    // simulate stake deduction here (frontend demo)
    // Generate target:
    const target = Math.floor(Math.random()*10);
    // compute distances:
    const dChosen = Math.abs(target - chosen);
    // For demo, opponent is system pick (random)
    const opponent = Math.floor(Math.random()*10);
    const dOpp = Math.abs(target - opponent);
    let outEl = document.getElementById('out');
    let text = `ðŸŽ¯ Target: ${target}\nYou: ${chosen} (dist ${dChosen})\nOpponent: ${opponent} (dist ${dOpp})\n`;
    if (dChosen < dOpp) {
      text += "ðŸ† You Win! (+â‚¹18 simulated)";
      outEl.style.background = '#153a1c'; outEl.style.color='#b9f0b8';
    } else if (dOpp < dChosen) {
      text += "âŒ You Lost (Opponent closer).";
      outEl.style.background = '#34151a'; outEl.style.color='#ffb6b6';
    } else {
      text += "ðŸ” Tie! Replay (no deduction).";
      outEl.style.background = '#30345a'; outEl.style.color='#dcdcff';
    }
    outEl.innerText = text;
  };
</script>
</body>
</html>
